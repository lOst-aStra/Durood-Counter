# Story 1.1: Initialize Android app skeleton

## Status
Approved

## Story
As a developer,
I want a Kotlin + Compose M3 single-activity project scaffold,
so that I can implement the core counter UI quickly and cleanly.

## Acceptance Criteria
1. Project uses Kotlin + Compose M3 with Single-Activity + MVVM setup [Source: docs/prd/epic-1-foundation-core-counter.md#L11]
2. App builds and runs on Android 12+ device/emulator [Source: docs/prd/epic-1-foundation-core-counter.md#L12]
3. Basic theme and typography applied [Source: docs/prd/epic-1-foundation-core-counter.md#L14]

## Tasks / Subtasks
- [x] Initialize Android project with Kotlin and Compose M3 using specified toolchain and SDK levels (AGP 8.6.0, Gradle 8.9, Kotlin 2.0.20; Min SDK 31, Target/Compile 35) (AC: 1, 2)
  - [x] Configure repositories `google()` and `mavenCentral()` [Source: docs/architecture-shards/build-and-dependencies.md]
  - [x] Enable Compose in build features and set Kotlin jvmTarget=17 [Source: docs/architecture-shards/build-and-dependencies.md]
  - [x] Add Compose BOM 2025.06.00, Activity Compose, Lifecycle, and testing deps [Source: docs/architecture-shards/build-and-dependencies.md]
- [x] Set application ID/namespace to `com.lostastra.duroodcounter` (AC: 1, 2) [Source: docs/architecture-shards/build-and-dependencies.md]
- [x] Create single-activity entry with Compose `setContent {}` and minimal scaffold (AC: 1, 2)
  - [x] MainActivity in `app/src/main/java/com/lostastra/duroodcounter/` [Source: docs/architecture-shards/modules-and-packages.md]
- [x] Establish package structure and placeholder files (AC: 1)
  - [x] `ui/` with `theme/` folder and empty `Theme.kt`, `Type.kt`, `Color.kt` [Source: docs/architecture-shards/modules-and-packages.md]
  - [x] `presentation/` with placeholder `CounterViewModel.kt` and `CounterState.kt` (stubs) [Source: docs/architecture-shards/viewmodel-and-state.md]
  - [x] `data/` with placeholder `CounterRepository.kt` and `datastore/CounterLocalDataSource.kt` (stubs) [Source: docs/architecture-shards/modules-and-packages.md]
  - [x] `core/` with placeholder `Haptics.kt` (stub) [Source: docs/architecture-shards/ui-composition.md]
  - [x] `di/` with `AppModule.kt` for manual wiring (simple provider functions) [Source: docs/architecture-shards/modules-and-packages.md]
- [ ] Apply basic theme and typography (AC: 3)
  - [x] Wire `MaterialTheme` with `Color.kt` and `Type.kt` [Source: docs/architecture-shards/ui-composition.md]
  - [ ] Add fonts to `app/src/main/res/font/` and reference in `Type.kt` (Noto Naskh Arabic, Nunito) [Source: docs/architecture-shards/ui-composition.md]
- [x] Configure `AndroidManifest.xml` with `android:supportsRtl="true"` (AC: 3) [Source: docs/architecture-shards/ui-composition.md]
- [ ] Run on Android 12+ emulator/device to confirm successful build and launch (AC: 2)
- [x] Add basic unit and instrumentation test scaffolding for future stories [Source: docs/architecture-shards/testing-strategy.md]

## Dev Notes

### Previous Story Insights
No previous stories. This is the first story of Epic 1.

### Data Models
- No specific data schema implemented in this story. Persistence comes in Story 1.3. [Source: docs/architecture-shards/data-model-and-persistence.md]

### API Specifications
- No network or external API usage in this story.

### Component Specifications
- Prepare Compose M3 setup with theming and typography per UI composition guidance.
  - Bundle fonts: `noto_naskh_arabic_regular.ttf`, `nunito_variable.ttf` in `res/font/`. [Source: docs/architecture-shards/ui-composition.md]
  - Define `Type.kt` and wire into `MaterialTheme(typography)`. [Source: docs/architecture-shards/ui-composition.md]
  - Prepare for haptics utilities to be triggered from ViewModel in later story. [Source: docs/architecture-shards/ui-composition.md]

### File Locations
- App module: `app/`
- Packages and key files:
  - `com.lostastra.duroodcounter.ui` → `theme/Color.kt`, `theme/Type.kt`, `theme/Theme.kt` [Source: docs/architecture-shards/modules-and-packages.md]
  - `com.lostastra.duroodcounter.presentation` → `CounterViewModel.kt`, `CounterState.kt` [Source: docs/architecture-shards/viewmodel-and-state.md]
  - `com.lostastra.duroodcounter.data` → `CounterRepository.kt`, `datastore/CounterLocalDataSource.kt` [Source: docs/architecture-shards/modules-and-packages.md]
  - `com.lostastra.duroodcounter.core` → `Haptics.kt` [Source: docs/architecture-shards/ui-composition.md]
  - `com.lostastra.duroodcounter.di` → `AppModule.kt` [Source: docs/architecture-shards/modules-and-packages.md]

### Testing Requirements
- Set up unit test and androidTest modules for later stories. Initial checks:
  - Project builds, MainActivity launches Compose content. [Source: docs/architecture-shards/testing-strategy.md]
  - Compose UI test dependencies added; basic smoke test can be added in later stories. [Source: docs/architecture-shards/testing-strategy.md]

### Technical Constraints
- Tooling: Gradle 8.9, AGP 8.6.0, Kotlin 2.0.20; Java toolchain 17. [Source: docs/architecture-shards/build-and-dependencies.md]
- SDKs: Compile/Target 35, Min 31. [Source: docs/architecture-shards/build-and-dependencies.md]
- Performance: keep cold start ≤ 1.5s; avoid heavy work in Application/Activity onCreate. [Source: docs/architecture-shards/performance.md]
- Keep DI minimal and avoid reflection-heavy frameworks at MVP stage. [Source: docs/architecture-shards/modules-and-packages.md]

## Testing
- CI step or local verification to build and launch on an Android 12+ emulator meets AC #2. [Source: docs/architecture-shards/testing-strategy.md]

## Change Log
| Date       | Version | Description                            | Author |
|------------|---------|----------------------------------------|--------|
| 2025-09-14 | 0.1     | Initial draft created from PRD + Arch. | SM     |

## Dev Agent Record
- Agent Model Used: Cascade
- Debug Log References:
- Completion Notes List:
  - Scaffolded Android project with Kotlin + Compose M3, namespace `com.lostastra.duroodcounter`, single-activity entry, package skeleton, and test scaffolding.
  - Manifest updated with `supportsRtl=true` and no XML theme dependency; Compose theme applied in code.
- File List:
  - `settings.gradle.kts`
  - `build.gradle.kts`
  - `gradle.properties`
  - `app/build.gradle.kts`
  - `app/proguard-rules.pro`
  - `app/src/main/AndroidManifest.xml`
  - `app/src/main/java/com/lostastra/duroodcounter/MainActivity.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/ui/theme/Color.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/ui/theme/Type.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/ui/theme/Theme.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/presentation/CounterState.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/presentation/CounterViewModel.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/data/CounterRepository.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/data/datastore/CounterLocalDataSource.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/core/Haptics.kt`
  - `app/src/main/java/com/lostastra/duroodcounter/di/AppModule.kt`
  - `app/src/test/java/com/lostastra/duroodcounter/ExampleUnitTest.kt`
  - `app/src/androidTest/java/com/lostastra/duroodcounter/ExampleInstrumentedTest.kt`

## QA Results
- TBD by QA Agent after implementation.
